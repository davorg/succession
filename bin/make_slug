#!/usr/bin/perl -CS

use strict;
use warnings;
use feature 'say';

use Data::Dumper;

use Succession::Schema;

my $person_rs = Succession::Schema->get_schema->resultset('Person');

while (my $p = $person_rs->next) {
  my $slug = lc $p->name =~ s/\W+/-/gr;

  $p->update({ slug => $slug });
}
